---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# hellohaplo

<!-- badges: start -->
<!-- badges: end -->

The goal of hellohaplo is to communicate with the [Haplo's REST API](https://docs.haplo.org/rest-api) from R.


## Installation

You can install the development version of hellohaplo from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("nsunami/hellohaplo")
```

## Usage

First, set the following environment variables:

- `HAPLO_API_KEY` to your API Key.
- `HAPLO_BASE_URL` to the hostname of the Haplo app (e.g., for EUR, it's https://ethicsmonitor.eur.nl/)

```{r example}
library(hellohaplo)
# Sys.setenv("HAPLO_API_KEY" = "YOUR_API_KEY_HERE")
# Sys.setenv("HAPLO_BASE_URL" = "https://ethicsmonitor.eur.nl/")
```

You can also use .Renviron to set your environment variable.

Then, you can get information about your Haplo object, using the ref of a named object.

```{r get-info}
res_84190 <- get_object_info("84190")
res_84190
```

Use `get_content` to get an R object of the response. 

```{r pluck-content}
content_84190 <- get_content(res_84190)
content_84190$object$title
```

For an ethics application object, you can also use `get_object_info()` to get the info. Then, you can use `pluck_applicant()` to get the list of pplicants.


```{r pluck-applicant}
# Ethics application 842q0
application_842q0 <- get_object_info("842q0")
content_842q0 <- application_842q0 |>
  get_content()
# Get the applicants associated with the application
content_842q0 |> 
  pluck_applicant()
```

## Licensing

All non-code materials are licensed under CC BY 4.0. All codes are under MIT license. 
